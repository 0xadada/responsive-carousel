/*! Responsive Carousel - v0.1.0 - 2012-06-26
* https://github.com/filamentgroup/responsive-carousel
* Copyright (c) 2012 Filament Group, Inc.; Licensed MIT, GPL */
(function(a){var b="carousel",c="[data-"+b+"]",d=function(a){return a[0].style.cssText.match(/margin\-left:\s*(-?[0-9]+)%/)&&parseFloat(RegExp.$1)},e={_create:function(){a(this).trigger("beforecreate."+b).addClass(b)[b]("_addContainer")[b]("_addNextPrev")[b]("_bindEventListeners")[b]("_updateItems").trigger("create."+b)},update:function(){a(this).trigger("beforeupdate."+b)[b]("_updateItems").trigger("update."+b)},_addContainer:function(){return a(this).wrapInner("<div class='"+b+"-contain'></div>")},next:function(c){a(this)[b]("goTo","-1",c)},prev:function(c){a(this)[b]("goTo","1",c)},goTo:function(c,e){var f=a(this).find("."+b+"-contain"),g=a(this).find("[data-"+b+"-item]"),h=e!==undefined?e:d(f)||0,i=typeof c=="number"?(c-1)*-100:h+parseFloat(c)*100;return i<=0&&i>g.length*-100&&f.css("margin-left",i+"%"),this},_bindEventListeners:function(){var c=a(this).bind("click",function(d){var e=a(d.target);e.is("a")&&(c[b](e.is("[href='#next']")?"next":"prev"),d.preventDefault())})},_updateItems:function(){var c=a(this).find("[data-"+b+"-item]");return c.addClass(b+"-item").width(100/c.length+"%"),a(this).find("."+b+"-contain").width(100*c.length+"%"),this},_addNextPrev:function(){return a(this).append("<nav><a href='#prev' class='prev' title='Previous'>Prev</a><a href='#next' class='next' title='Next'>Next</a></nav>")},destroy:function(){var c=a(this);return c.removeData(b+"active").removeClass(b).unbind("."+b).html(c.children().children()),c.find("[data-"+b+"-item]").removeClass(b+"-item").unbind("."+b),c.trigger("destroy."+b),this}};a.fn[b]=function(c,d){return this.each(function(){if(c&&typeof c=="string")return a.fn[b].prototype[c].call(this,d);if(a(this).data(b+"data"))return a(this);a(this).data(b+"active",!0),a.fn[b].prototype._create.call(this)})},a.extend(a.fn[b].prototype,e),a(function(){a(c)[b]()})})(jQuery),function(a){var b="carousel",c="[data-"+b+"]",d=function(a){return a[0].style.cssText.match(/margin\-left:\s*(-?[0-9]+)%/)&&parseFloat(RegExp.$1)},e={_dragBehavior:function(){var c,e,f,g=a(this).find("."+b+"-contain"),h,i,j,k,l;g.bind("touchstart",function(e){var f=e.touches||e.originalEvent.touches;c={x:f[0].pageX,y:f[0].pageY},h=d(g)||0,i=parseFloat(g.css("margin-left")),j=a(this).parent().width(),k=g.width(),a(this).addClass(b+"-dragging"),e.preventDefault()}).bind("touchmove",function(a){var b=a.touches||a.originalEvent.touches,d={x:b[0].pageX,y:b[0].pageY};e=d.x-c.x,f=d.y-c.y;var h=i+e;Math.abs(h)<=k&&h<=0&&g.css("margin-left",h+"px")}).bind("touchend",function(c){a(this).removeClass(b+"-dragging");var d=i+e;Math.abs(e)>45&&Math.abs(d)<k&&d<0?l=(e>0?j:-j)+i:l=i,g.css("margin-left",l+"px").bind("webkitTransitionEnd transitionend",function(){a(this).css("margin-left",l/j*100+"%").unbind("webkitTransitionEnd transitionend")})})}};a.extend(a.fn[b].prototype,e),a(c).live("create."+b,function(){a(this)[b]("_dragBehavior")})}(jQuery);